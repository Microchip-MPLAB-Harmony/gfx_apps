<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>aria_adv_mzda_intddr_sk_meb2_tm4301b.X</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '00017.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="00000.html" target="topic">MPLAB Harmony Graphics Suite Applications</a> &gt; <a href="00039.html" target="topic">Examples and Demonstrations</a> &gt; <a href="00037.html" target="topic">Aria Applications</a> &gt; <a href="00001.html" target="topic">aria_adventure</a> &gt; <a href="00017.html" target="topic">aria_adv_mzda_intddr_sk_meb2_tm4301b.X</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB® Harmony Graphics Suite Applications</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00000.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="00001.html" target="topic">Previous</a> | <a href="00001.html" target="topic">Up</a> | <a href="00002.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: aria_adv_mzda_intddr_sk_meb2_tm4301b.X Topic Title: aria_adv_mzda_intddr_sk_meb2_tm4301b.X)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
aria_adv_mzda_intddr_sk_meb2_tm4301b.X</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<div class="Element15">
Defining the Architecture</div>
<p class="Element10" style="text-align: center;">
<img src="APPS GFX aria_adventure pic32mz_da_sk_extddr_meb2 and pic32mz_da_sk_extddr_meb2_wvga Double Buffered, with GPU, 3 Layers, Double Buffered.png" border="0" alt="" title=""></p><p class="Element10">
The diagrams below show the various software and hardware components for each configuration.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
For this configuration, the application uses the Graphics library to render graphics to the display. The Graphics library passes draw commands into the GPU Library, which in-turn draws the widgets and images to the frame buffer that is stored in an external DDR2. Via the DDR2 Memory Controller, the GLCD display controller peripheral continuously transfers frame data from the frame buffer onto to the LCD display.&nbsp;</p>
<p class="Element10">
The application also features user touch input through the integrated touch screen on the display panel. Touch input from the touch controller goes thru the I<sup>2</sup>C port, and the Input System Service acquires the touch input information from the touch and I<sup>2</sup>C drivers. The Input System Service sends touch events to the Graphics library which processes these events and updates the frame data accordingly.&nbsp;</p>
<p class="Element10">
The core timer is used by the application and the Graphics library to manage the movement of the splash screen. </p><p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><div class="Element15">
Demonstration Features</div>

<ul class="Element630">
<li class="Element600">Integrated PCAP Touch Input</li>
<li class="Element600">Three graphics layer supported via the GLCD peripheral on the PIC32MZ DA device</li>
<li class="Element600">Preprocessed Image assets to leverage GPU peripheral supported</li>
<li class="Element600">Sprite animation achieved using Image Sequence Widget</li>
<li class="Element600">Parallax</li>
<li class="Element600">32-bit RGBA8888 color depth support (16.7 million unique colors)</li>
<li class="Element600">Per-layer frame double-buffering</li>
<li class="Element600">Image compression techniques using Run-Length Encoding, PNG, and JPEG</li>
</ul><p class="Element10">
&nbsp;</p>
<div class="Element15">
Creating the Project</div>
<p class="Element10" style="text-align: center;">
<img src="aria_ad_mzda_sk_intddr_wqvga_pg.png" border="0" alt="" title=""></p><p class="Element10">
The Project Graph diagram shows the Harmony components that are included in this application. Lines between components are drawn to satisfy components that depend on a capability that another component provides.&nbsp;</p>
<p class="Element10">
Adding the “PIC32MZ DA Starter Kit BSP” and “Aria Graphics w/ PDA TM4301B Display” Graphics Template component into the project graph will automatically add the components needed for a graphics project and resolve their dependencies. It will also configure the pins needed to drive the external peripherals like the display and the touch controller. </p><p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="APPS GFX confdiag_e70_freertos_heap.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><p class="Element10">
The I2C Baud Rate for the I2C1 component to 1,000,000 Hz.&nbsp;</p>
<p class="Element10">
&nbsp;</p><p class="Element10" style="text-align: center;">
<img src="i2c_baud_rate.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><p class="Element10">
Enable Double Buffer Mode in GFX Core&nbsp;</p>
<p class="Element10">
&nbsp;</p><p class="Element10" style="text-align: center;">
<img src="driver_config_hints.png" border="0" alt="" title="">&nbsp;</p><p class="Element10">
&nbsp;</p>
<p class="Element10">
To build this project, the user must open the aria_adventuret.X project in MPLAB X IDE, and then select the desired configuration.&nbsp;</p>
<p class="Element10">
The following tables list and describe the project and supported configurations. The parent folder for these files is &lt;install-dir&gt;/apps/gfx/aria_adventure.&nbsp;</p>
<p class="Element10">
&nbsp;</p><div class="Element15">
Building the Application</div>
<p class="Element10">
The parent directory for this application is gfx/apps/aria_adventure. To build this application, use MPLABX IDE to open the gfx/apps/aria_adventure/firmware/aria_adv_mzda_intddr_sk_meb2_tm4301b.X project file.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
The following table lists configuration properties: </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table2">
<tr>
<td class="Element65" valign="top" width="25%">
<div class="Element66">
Project Name&nbsp;</div></td><td class="Element65" valign="top" width="12%">
<div class="Element66">
BSP Used&nbsp;</div></td><td class="Element65" valign="top" width="25%">
<div class="Element66">
Graphics Template Used&nbsp;</div></td><td class="Element65" valign="top" width="38%">
<div class="Element66">
Description&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="25%">
<div class="Element68">
aria_adv_mzda_intddr_sk_meb2_tm4301b.X&nbsp;</div></td><td class="Element67" valign="top" width="12%">
<div class="Element68">
PIC32MZ DA Starter Kit&nbsp;</div></td><td class="Element67" valign="top" width="25%">
<div class="Element68">
Aria Graphics w/ PDA TM4301b Display&nbsp;</div></td><td class="Element67" valign="top" width="38%">
<div class="Element68">
Aria GFX on PIC32MZ DA with Internal DDR Starter Kit, MEBII and PDA TM4301b Display&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
&nbsp;</p>
<div class="Element15">
Configuring the Hardware</div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
On the MEB II, the EBIOE and LCD_PCLK (J9) must be jumpered. A connection establishes the GLCD's pixel clock output timing. The external SRAM memory on the board is disabled. The J9 jumper is located on the bottom of the MEB II board, beneath where the starter kit is plugged into the board. Refer to the following figure for the exact location.&nbsp;</p>
<p class="Element10">
&nbsp;</p><p class="Element10" style="text-align: center;">
<img src="APPS GFX aria_quickstart MEB II J9 Pixel Clock.png" border="0" alt="" title="">&nbsp;</p><p class="Element10">
&nbsp;</p>
<p class="Element10">
Connect the PIC32MZ DA Starter Kit to the MEB II board&nbsp;</p>
<p class="Element10">
&nbsp;</p><p class="Element10" style="text-align: center;">
<img src="mzda_intddr_hardware.png" border="0" alt="" title="">&nbsp;</p><p class="Element10">
&nbsp;</p>
<p class="Element10">
Power up the board by connecting the power adapter to J3 power connector on the MEB II board or a powered USB cable to the USB DEBUG port on the Starter Kit board </p><p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><div class="Element15">
Running the Demonstration</div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>Splash Screen</strong>&nbsp;</p>
<p class="Element10">
On start-up, the application will display a splash screen: </p><p class="Element10" style="text-align: center;">
<img src="APPS GFX aria_adventure splashscreen.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><p class="Element10">
<strong>Main Screen</strong>&nbsp;</p>
<p class="Element10">
Subsequently, the demonstrations main mode will appear: </p><p class="Element10" style="text-align: center;">
<img src="APPS GFX aria_adventure demo main mode.png" border="0" alt="" title=""></p><p class="Element10">
&nbsp;</p>
<p class="Element10">
Without any touch interaction, the lamb sprite character remains stationary and loops in an idle animation. Pressing a finger on left or right half of the screen near one of the semi-transparent chevrons will trigger the lamb sprite to start moving towards that respective side of the screen. The longer the finger remain pressed, the “faster” the lamb will travel. Note the speed of the background increases as the lamb seemingly speeds up. The needle on the circular gauge will increase as the lamb travels. When the needle is in the yellow area, the lamb is in “super speed” mode. But if the needle touches the red section of the meter, the lamb becomes “exhausted”. It would fall and become dizzy before recovering. Touch interaction is disabled while the lamb takes a fall and is dizzy. A score is tallied based on how “far” the lamb has travelled before becoming exhausted. A high score is kept for as long as the application has power.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>Parallax</strong>&nbsp;</p>
<p class="Element10">
The parallax feature is in full demonstration while the lamb is moving, as the speed of the clouds, the rolling hills and the pathway that the lamb is traveling on are all moving at different speed to create an illusion of movement and distance. The art of the background was chosen to be “loop-able”. The application keeps track of which part of the background scenery that is being shown and loops back to the start position seamlessly when the end is reached.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>Animations</strong>&nbsp;</p>
<p class="Element10">
The animations used to support the lamb include:</p>
<ul class="Element630">
<li class="Element600">Idle Facing Right</li>
<li class="Element600">Idle Facing Left</li>
<li class="Element600">Walk/Run Facing Right</li>
<li class="Element600">Walk/Run Facing Left</li>
<li class="Element600">Super Speed Facing Right</li>
<li class="Element600">Super Speed Facing Left</li>
<li class="Element600">Fall Facing Right</li>
<li class="Element600">Fall Facing Left</li>
<li class="Element600">Dizzy Facing Right</li>
<li class="Element600">Dizzy Facing Left</li>
</ul><p class="Element10">
&nbsp;</p>
<p class="Element10">
The application contains a decision-tree that picks the right set of animation to play out based on the facing direction and the “speed” of the lamb movement on-screen.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>Information Screen</strong>&nbsp;</p>
<p class="Element10">
Tapping the Microchip logo on the upper corner of the main screen will switch the application to the information screen.&nbsp;</p>
<p class="Element10">
The information screen serves as a screen to list out the demonstrated features of the demo. It also provides two features.</p>
<ul class="Element630">
<li class="Element600">The features are located on layer1. Sliding a finger up or down will cause the feature list to scroll up and down as if it’s on an invisible glass pane. The MPLAB Harmony logo that is rendered on layer0 is another demonstration of the real-time alpha-blending capability of the GLCD.</li>
<li class="Element600">Touching the Microchip logo will trigger no visible change on-screen, but will toggle on/off a hidden “Easter Egg” mode. When the hidden mode is enabled, after going back to the main screen, the lamb character can go into “super speed” mode in-definitely without succumbing to exhaustion.</li>
</ul></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="00000.html" target="topic">MPLAB Harmony Graphics Suite Applications</a> &gt; <a href="00039.html" target="topic">Examples and Demonstrations</a> &gt; <a href="00037.html" target="topic">Aria Applications</a> &gt; <a href="00001.html" target="topic">aria_adventure</a> &gt; <a href="00017.html" target="topic">aria_adv_mzda_intddr_sk_meb2_tm4301b.X</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
MPLAB® Harmony Graphics Suite Applications</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00000.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="00001.html" target="topic">Previous</a> | <a href="00001.html" target="topic">Up</a> | <a href="00002.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: aria_adv_mzda_intddr_sk_meb2_tm4301b.X Topic Title: aria_adv_mzda_intddr_sk_meb2_tm4301b.X)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>