<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>aria_mc_e70_xu_tm4301b.X</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '00030.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="00000.html" target="topic">MPLAB Harmony Graphics Suite Applications</a> &gt; <a href="00043.html" target="topic">Examples and Demonstrations</a> &gt; <a href="00041.html" target="topic">Aria Applications</a> &gt; <a href="00006.html" target="topic">aria_mxt_configure</a> &gt; <a href="00030.html" target="topic">aria_mc_e70_xu_tm4301b.X</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB® Harmony Graphics Suite Applications</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00000.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="00006.html" target="topic">Previous</a> | <a href="00006.html" target="topic">Up</a> | <a href="00007.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: aria_mc_e70_xu_tm4301b.X Topic Title: aria_mc_e70_xu_tm4301b.X)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
aria_mc_e70_xu_tm4301b.X</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
This application demonstrates a method of updating the maXTouch runtime configuration register set. It uses capabilities of the aria graphics library UI components and Harmony maxTouch driver API. It offers an easy to use menu interface to demonstrate the staging, loading, testing, and saving of configuration content. It accepts two file formats: maXTouch XCFG and RAW. The application employs USB/CDC serial, ProgramFlash, and SDCard source input. If offers a screen to select the load source, screen for touch testing, and capability to store configration to NVM non-volatile memory.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
This demonstration contains sample maXTouch.raw and maXTouch.xcfg files. Use <a href="#" onclick="openExternalLink('https://www.microchip.com/design-centers/capacitive-touch-sensing/touch-pads-touch-screens/maxtouch');">maXTouch Studio</a> and support kits to create whole product configuration solutions which includes developing and debugging for all maXTouch devices.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
The key points are:</p>
<ul class="Element630">
<li class="Element600">Capable of sourcing from PC USb serial streaming</li>
<li class="Element600">Capable of sourcing SDCard retrieval</li>
<li class="Element600">Capable of sourcing from ProgramFlash</li>
<li class="Element600">Non-volatile storage</li>
<li class="Element600">Supports XCFG and Raw file format</li>
</ul><p class="Element10">
&nbsp;</p>
<div class="Element15">
Defining the Architecture</div>
<p class="Element10" style="text-align: center;">
<img src="APPS GFX aria_benchmark sam_e70_xplained_ultra plus wqvga.png" border="0" alt="" title=""></p><p class="Element10">
The aria_mxt_configuration application uses the aria graphics library to render graphics to the display. The graphics library draws the widgets and images to a frame buffer. The contents of the frame buffer are continuously transferred to refresh the contents of the LCD display. The application also features user touch input through the integrated touch screen on the display panel. Touch input from the touch controller goes through the I2C port, and the Input System Service acquires the touch input information from the Touch and I2C Drivers. Touch configuration uses the same I2C port as Touch input. Touch is disabled during configuration and re-enabled after completion. The Input System Service sends touch events to the Graphics Library, which processes these events and updates the frame data accordingly.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
The block diagram(s) below show the various software and hardware blocks used in this application. </p><p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><div class="Element15">
Demonstration Features</div>
<p class="Element10">
&nbsp;</p>

<ul class="Element630">
<li class="Element600">Low-Cost Controllerless (LCC) Graphics driver on the SAM E70 device</li>
<li class="Element600">maXTouch file parsing, loading, and saving.</li>
<li class="Element600">USB/CDC serial, SYS_FS, Uart</li>
<li class="Element600">Button and Image Widgets</li>
</ul><p class="Element10">
&nbsp;</p>
<div class="Element15">
Configuring the Project</div>
<p class="Element10" style="text-align: center;">
<img src="APP GFX aria_mxt_configure sam_e70_xult.png" border="0" alt="" title=""></p><p class="Element10">
The Project Graph diagram shows the Harmony components that are included in this application. Lines between components are drawn to satisfy components that depend on a capability that another component provides.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
Adding the “SAM E70 XPlained Ultra BSP”and the “Aria Graphics w/ PDA TMA4301B Display” components into the project graph will automatically add the components needed for a graphics project and resolve their dependencies. It will also configure the pins needed to drive the external peripherals like the display and the touch controller.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
In this configuration, a 16-bit RGB565 frame buffer is stored in internal SRAM. Due to the limited size of the internal SRAM, only a single frame buffer can be used which can cause tearing to be visible as the GFX library draws on the screen. These configurations use the Low-Cost Controller-less (LCC) display driver to manage the DMA that transfers the framebuffer contents to the display.&nbsp;</p>
<p class="Element10">
&nbsp;</p><div class="Element15">
Building the Application</div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
The parent directory for this application is gfx_apps/apps/aria_mxt_configure. To build this application, use MPLABX to open the gfx_apps/apps/aria_mxt_configure/firmware/aria_mc_e70_xu_tm4301b.X project.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
The following table lists configuration properties: </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table2">
<tr>
<td class="Element65" valign="top" width="17%">
<div class="Element66">
Project Name&nbsp;</div></td><td class="Element65" valign="top" width="14%">
<div class="Element66">
BSP Used&nbsp;</div></td><td class="Element65" valign="top" width="29%">
<div class="Element66">
Graphics Template Used&nbsp;</div></td><td class="Element65" valign="top" width="40%">
<div class="Element66">
Description&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="17%">
<div class="Element68">
aria_mc_e70_xu_tm4301b.X&nbsp;</div></td><td class="Element67" valign="top" width="14%">
<div class="Element68">
sam_e70_xmplained_ultra&nbsp;</div></td><td class="Element67" valign="top" width="29%">
<div class="Element68">
Aria Graphics w/PDA TM4301B Display&nbsp;</div></td><td class="Element67" valign="top" width="40%">
<div class="Element68">
SAM E70 Xplained Ultra board with PDA TM4301B 480x272 (WQVGA) Display&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
&nbsp;</p>
<div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Important Star.png" border="0" alt="" title=""><strong> Important!</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
This application may contain custom code that is marked by the comments <span class="Element146">// START OF CUSTOM CODE ...</span> and <span class="Element146">// END OF CUSTOM CODE</span>. If you use the MPLAB Harmony Configurator to regenerate the application code, use the &quot;ALL&quot; merging strategy and <i>do not</i> remove or replace the custom code.&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
There are two programming options. The primary option is the Micro B Embedded Debugger (EDBG) port. Power to the board can also be supplied via this connection. The secondary option is via the ICD4 debugger with the ICD4/PICKit 4 Target Adapter Board (Power has to be provided from power supply in this alternative setup).&nbsp;</p>
<p class="Element10">
&nbsp;</p><div class="Element15">
Configuring the Hardware</div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
The image below shows both the EDBG and the ICD4 connection options: </p><p class="Element10" style="text-align: center;">
<img src="APPS GFX aria_benchmark Final Setup.png" border="0" alt="" title=""></p><p class="Element10">
Configuring the 4.3” WQVGA Display requires disconnecting the ribbon cable that connects the display to the interposer board. </p><p class="Element10" style="text-align: center;">
<img src="APPS GFX aria_benchmark Bottom of WQVGA Display.png" border="0" alt="" title=""></p><p class="Element10">
First, release the ribbon cable from the interposer board. Next, release the black clamp on the E70’s J2 connector and turn the display over. Finally, insert the ribbon cable into J2 and close the clamp. </p><p class="Element10" style="text-align: center;">
<img src="APPS GFX aria_benchmark Connecting Ribbon Cable.png" border="0" alt="" title=""></p><p class="Element10">
The board and display are powered by a Micro B – USB A cable from PC to the “Debug USB” port on the E70 board. The ICD4 Debugger and ICD4/PICKit4 Adapter Board are connected as shown above.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
Note: For PC file transfer, insert Micro B – USB A cable from PC to the “Target USB” port on the E70 board.&nbsp;</p>
<p class="Element10">
&nbsp;</p><p class="Element10" style="text-align: center;">
<img src="GFX APPS mc_debug_usb.png" border="0" alt="" title="">&nbsp;</p><p class="Element10">
&nbsp;</p>
<div class="Element15">
Running the Demonstration</div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
Upon boot-up, the application displays the animation Splash Screen, which shows an animated splash bar while blending in the MPLAB Harmony and Microchip PIC32 logos, as shown in the following figure.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
When Splash Screen animation is successful, the demonstration will display a similar menu to that shown in the following figure.&nbsp;</p>
<p class="Element10">
&nbsp;</p><p class="Element10" style="text-align: center;">
<img src="APPS GFX aria_showcase_splash_screen_blend.png" border="0" alt="" title="">&nbsp;</p><p class="Element10">
&nbsp;</p>
<p class="Element10">
When power-on is successful, the application Home Screen will be displayed&nbsp;</p>
<p class="Element10">
&nbsp;</p><p class="Element10" style="text-align: center;">
<img src="APP GFX aria_mxt_configure home.png" border="0" alt="" title="">&nbsp;</p><p class="Element10">
&nbsp;</p>
<p class="Element10">
The demonstration supports three input options for reading the configuration file:</p>
<ul class="Element630">
<li class="Element600">Program Flash - ProgramFlash is the default option and requires no manual source file interaction. The maxtouch config data is save in program flash as an array.</li>
<li class="Element600">SDCard - requires a microSDHC flash memory card. Copy <strong>maxtouch.raw</strong> onto root directory of memory card. Install memory card into micro SD card slot.</li>
<li class="Element600">Host PC - requires a micro-usb cable connection from PC to Target USB port. For this option install <span class="Element145">RealTerm</span>: Serial/TCP Terminal program.</li>
</ul><p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>Note</strong>: This demonstration does not communicate error conditions related to inability to read from SDCARD or PC.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
Following instructions below for each specific option of choice:&nbsp;</p>
<p class="Element10">
&nbsp;</p><p class="Element10" style="text-align: center;">
<img src="APP_MXT_home_screen.png" border="0" alt="" title="">&nbsp;</p><p class="Element10">
&nbsp;</p>
<div class="Element15">
Program Flash</div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
This is the default option. The config content is embedded in program flash of the firmware. This option requires no external file preparation.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
To run this option.:&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<ol class="Element630">
<li value="1" class="Element600">On the Main Menu, press the <strong>Configure </strong>button<strong>. </strong>The application will transition to the Load Configuration (RAM) screen.</li>
</ol><p class="Element10" style="text-align: center;">
<img src="APP_MXT_load_screen.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="2" class="Element600">On the Load Configuration Screen, select <strong>Program</strong> radio button. This will enable configuration reading from Program Flash.</li>
<li value="3" class="Element600">Press the Load<strong> </strong>button. The step will read, parse, and load the configuration information located in Program Flash.</li>
<li value="4" class="Element600">Observe the target board UI progress bar.</li>
<li value="5" class="Element600">When complete, the Load button will be removed, and the Next<img src="APP_MXT_next_button.png" border="0" alt="" title=""><strong>)</strong> screen button image will be displayed.</li>
</ol><p class="Element10" style="text-align: center;">
&nbsp;</p>

<ol class="Element630">
<li value="6" class="Element600">Go to Step &quot;<strong>All Options</strong>&quot; below.</li>
</ol><p class="Element10">
&nbsp;</p>
<div class="Element15">
SD Card</div>
<p class="Element10">
This option requires a SDCARD. The SDCARD should be loaded with maxtouch.xcfg or maxtouch.raw file in the root folder. Only 1 file can be store on the SDCARD for this release. An example maxtouch.xcfg file can be found at the following location: &lt;installdir&gt;/apps/gfx_apps/aria_mxt_configure /firmware/src/config_files&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
To run this option.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<ol class="Element630">
<li value="1" class="Element600">On the Main Menu Press the <strong>Configure</strong> Button. The application will transition to the Load Configuration screen.</li>
</ol><p class="Element10" style="text-align: center;">
<img src="APP_MXT_load_screen.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="2" class="Element600">On the Load Configuration Screen, select <strong>SD Card</strong> radio button. This will enable the reading from the microSD card inserted in the SD Card slot.</li>
<li value="3" class="Element600">Press the <strong>Load </strong> button. The step will read, parse, and load the configuration information located in the maxtouch.xcfg or maxtouch.raw file.</li>
<li value="4" class="Element600">Observe the target board UI progress bar. When complete, the Load button will be removed, and the Next (<img src="APP_MXT_next_button.png" border="0" alt="" title="">) screen button image will be displayed.</li>
<li value="5" class="Element600">Go to Step &quot;<strong>All Options</strong>&quot; below.</li>
</ol><p class="Element10">
&nbsp;</p>
<div class="Element15">
Host PC</div>
<p class="Element10">
This option requires a HOST PC connected to the Target board. The configuration file will be streamed from the Host PC to the Target board. For the purpose of this option, the user should establish a host PC connected to the Target board via a USB cable. A USB cable needs to be connected to the micro-B USB connector on the bottom of the starter kit in use. When the demonstration runs, it will create a USB CDC device on the USB bus. The demonstration can be executed once you have connected to this device through RealTerm terminal program. See the following download link: <a href="#" onclick="openExternalLink('https://sourceforge.net/projects/realterm');">RealTerm</a>&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
Please refer to the connection diagram shown below.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
To run this option.:</p>
<ol class="Element630">
<li value="1" class="Element600">On the Main Menu Press the <strong>Configure</strong> Button. The application will transition to the Load Configuration screen.</li>
</ol><p class="Element10">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="APP_MXT_load_screen.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="2" class="Element600">On the Load Configuration Screen, select PC radio button. This will enable the reading from Host PC.</li>
<li value="3" class="Element600">Press the <strong>Load</strong> button. The step will create the USB CDC device on the USB bus, establish connection, and wait for PC to initiate the transfer.</li>
<li value="4" class="Element600">On the PC, invoke <strong>RealTerm</strong> application .</li>
<li value="5" class="Element600">Using the <strong>Port</strong> Tab, connect to the new Serial comm port.</li>
<li value="6" class="Element600">Using the <strong>Send</strong> Tab, select the <strong>Dump File to Port</strong> drop down. Select the <strong>maxtouch.raw</strong> file.</li>
</ol><p class="Element10" style="text-align: center;">
<img src="GFX APPS mc_realterm_file.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="7" class="Element600">Set <strong>Delays</strong> to 1 and 5</li>
</ol><p class="Element10">
&nbsp;</p>
<p class="Element10">
See image below for Realterm Send setup:&nbsp;</p>
<p class="Element10">
&nbsp;</p><p class="Element10" style="text-align: center;">
<img src="GFX APPS mc_realterm_setup.png" border="0" alt="" title="">&nbsp;</p>
<ol class="Element630">
<li value="8" class="Element600">Finally, select the <strong>Send</strong> <strong>File</strong> button</li>
<li value="9" class="Element600"> When complete, the <strong>Progress</strong> bar on the RealTerm interface will display “Done”</li>
</ol><p class="Element10">
&nbsp;</p>
<p class="Element10">
See image below for Realterm Done display:&nbsp;</p>
<p class="Element10">
&nbsp;</p><p class="Element10" style="text-align: center;">
<img src="GFX APPS mc_realterm_done.png" border="0" alt="" title="">&nbsp;</p>
<ol class="Element630">
<li value="10" class="Element600"> Observe the Target board UI , when complete, the Load button will be removed, and the Next (<img src="APP_MXT_next_button.png" border="0" alt="" title="">) screen button image will be displayed.</li>
<li value="11" class="Element600"> Go to Step &quot;All Options&quot; below.</li>
</ol><p class="Element10">
&nbsp;</p>
<div class="Element15">
All Options</div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
To complete the demonstration for all options.</p>
<ol class="Element630">
<li value="1" class="Element600">Use the <strong>Next {<img src="APP_MXT_next_button.png" border="0" alt="" title="">}</strong> button to transition to the Key Pad Touch Accuracy test screen.</li>
</ol><p class="Element10">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="APP_MXT_keypad_screen.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="4" class="Element600">Press key pad buttons to test touch button accuracy.</li>
</ol><p class="Element10">
&nbsp;</p>

<ol class="Element630">
<li value="5" class="Element600">Use <strong>Next </strong> to transition to the Multi Touch Test Screen</li>
</ol><p class="Element10">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="APP_MXT_test_screen.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>

<ol class="Element630">
<li value="6" class="Element600">Drag finger across display, to test gesture accuracy.</li>
</ol><p class="Element10">
&nbsp;</p>

<ol class="Element630">
<li value="7" class="Element600">Use <strong>Next</strong> button Button to transition to the Store Configuration (Flash) Screen</li>
</ol><p class="Element10">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="APP_MXT_store_screen.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="8" class="Element600">Press <strong>Save </strong>button to copy config information from maXTouch RAM to maXTouch non-volatile memory for persistent storage.</li>
</ol></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="00000.html" target="topic">MPLAB Harmony Graphics Suite Applications</a> &gt; <a href="00043.html" target="topic">Examples and Demonstrations</a> &gt; <a href="00041.html" target="topic">Aria Applications</a> &gt; <a href="00006.html" target="topic">aria_mxt_configure</a> &gt; <a href="00030.html" target="topic">aria_mc_e70_xu_tm4301b.X</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
MPLAB® Harmony Graphics Suite Applications</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00000.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="00006.html" target="topic">Previous</a> | <a href="00006.html" target="topic">Up</a> | <a href="00007.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: aria_mc_e70_xu_tm4301b.X Topic Title: aria_mc_e70_xu_tm4301b.X)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>